<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>西武池袋線 秋津駅 発車標シミュレーター</title>
    <link rel="icon" href="./resource/img/icon.svg" />
    <meta name="author" content="yoshi yui-Kitamura" />
    <meta name="description" content="西武池袋線秋津駅の発車標をシミュレーション表示するページです" />

    <link rel="stylesheet" href="./resource/style.css" type="text/css">

    <script src="./resource/main.js"></script>
    <script src="./resource/utility.js"></script>
    <script src="./resource/imgList.js"></script>
    <script src="./resource/font/font.js"></script>
    <script>
        //OS・ユーザエージェントを判別
        judgeUA();
    </script>
</head>

<body>
<main>
    <section id="main">
        <!--発車標描画部-->
        <div id="LEDUnitDiv">
            <div style="position:relative; top:0; left:0; height:930px; width:fit-content;">
                <!-- 1台め -->
                <div style="position:absolute; top:5px; left:40px; width:1407px;">
                    <div id="kyotaiMainDiv0" style="position:absolute; ">
                        <div style="position:absolute; top:0; left:0; width:1257px; height:438px; background-color:#777; ">
                            <!-- 方面ラベル -->
                            <img style="position:absolute; top:0; left:0; width:1257px; height:129px;" src="./resource/img/label/title-0.png" alt="" />
                            <div style="position:absolute; top:129px; left:33px; width:1194px; height:285px; background-color:#222;">
                                <!-- 項目名ラベル -->
                                <img style='position:absolute; top:0; left:0; width:1152px; height:42px; ' src='./resource/img/label/header.png' alt='' />
                                <!-- LED描画部 -->
                                <div id="mainLEDDiv0" style="position:absolute; top:42px; left:0; width:1152px; height:216px; background-color:#000;">
                                    <div style="position:absolute; top:0; left:0; width:1149px; height:216px; background-color:#000;">
                                        <div id="mainLEDRow00" style="position:absolute; top:0; left:0; width:1152px; height:72px; overflow:hidden;">
                                            <script>document.getElementById("mainLEDRow00").innerHTML = writeLineHTML(0, 0)</script>
                                        </div>
                                        <div id="bottomLineDiv0" style="position:absolute; top:72px; left:0; width:1152px; height:72px; background-color:#000; z-index:1;">
                                        </div>
                                        <div id="mainLEDRow01" style="position:absolute; top:144px; left:0; width:1152px; height:72px; overflow:hidden;">
                                            <script>document.getElementById("mainLEDRow01").innerHTML = writeLineHTML(0, 1)</script>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- 2台め -->
                <div style="position:absolute; top:455px; left:40px; width:1407px;">
                    <div id="kyotaiMainDiv1" style="position:absolute; ">
                        <div style="position:absolute; top:0; left:0; width:1257px; height:438px; background-color:#777; ">
                            <!-- 方面ラベル -->
                            <img style="position:absolute; top:0; left:0; width:1257px; height:129px;" src="./resource/img/label/title-1.png" alt="" />
                            <div style="position:absolute; top:129px; left:33px; width:1194px; height:285px; background-color:#222;">
                                <!-- 項目名ラベル -->
                                <img style='position:absolute; top:0; left:0; width:1152px; height:42px; ' src='./resource/img/label/header.png' alt='' />
                                <!-- LED描画部 -->
                                <div id="mainLEDDiv1" style="position:absolute; top:42px; left:0; width:1152px; height:216px; background-color:#000;">
                                    <div style="position:absolute; top:0; left:0; width:1152px; height:216px; background-color:#000;">
                                        <div id="mainLEDRow10" style="position:absolute; top:0; left:0; width:1152px; height:72px; overflow:hidden;">
                                            <script>document.getElementById("mainLEDRow10").innerHTML = writeLineHTML(1, 0)</script>
                                        </div>
                                        <div id="bottomLineDiv1" style="position:absolute; top:72px; left:0; width:1152px; height:72px; background-color:#000; z-index:1;">
                                        </div>
                                        <div id="mainLEDRow11" style="position:absolute; top:144px; left:0; width:1152px; height:72px; overflow:hidden;">
                                            <script>document.getElementById("mainLEDRow11").innerHTML = writeLineHTML(1, 1)</script>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- 時計 -->
                <div id="clocks" style="position:absolute; top:0; left:1315px;">
                    <!-- デジタル -->
                    <div style="position:absolute; top:5px; left:0; height:87px; width:318px; background-color:#777; ">
                        <div id="digitClock" style="position:relative; margin:15px; background-color:black; width:calc(100% - 30px); height:72px;">
                            <div id='clockNum' style='position:absolute; left:0; top:0; width:288px; height:72px; overflow:hidden; background-color:#000; z-index:1;' >
                                <div style='position:absolute; left:0; top:0; width:288px; height:72px; overflow:hidden;' >
                                    <img class='led' style='position:absolute; left:-4640px; top:-0px;' id='currentTime0Img' src='./resource/img/mainx8.png' alt='' />
                                </div>
                                <div style='position:absolute; left:30px; top:0; width:45px; height:72px; overflow:hidden;'>
                                    <img class='led' style='position:absolute; left:-5600px; top:-0px;' id='currentTime4Img' src='./resource/img/mainx8.png' alt='' />
                                </div>
                                <div style='position:absolute; left:78px; top:0; width:45px; height:72px; overflow:hidden;'>
                                    <img class='led' style='position:absolute; left:-5856px; top:-0px;' id='currentTime3Img' src='./resource/img/mainx8.png' alt='' />
                                </div>
                                <div style='position:absolute; left:162px; top:0; width:45px; height:72px; overflow:hidden;'>
                                    <img class='led' style='position:absolute; left:-5600px; top:-0px;' id='currentTime2Img' src='./resource/img/mainx8.png' alt='' />
                                </div>
                                <div style='position:absolute; left:210px; top:0; width:45px; height:72px; overflow:hidden;'>
                                    <img class='led' style='position:absolute; left:-5856px; top:-0px;' id='currentTime1Img' src='./resource/img/mainx8.png' alt='' />
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- アナログ -->
                    <div style="position:absolute; top:92px; height:260px; width:318px; background-color:#777;">
                        <canvas id="analogClock" width="288px" height="230px" style="margin:15px;background-color:darkgreen; border-radius: 15px;"></canvas>
                    </div>
                </div>
                <div style="position:absolute; top:355px; left:1315px; width:296px">
                    <form>
                        <fieldset style="width: 100%;padding: 10px;margin:0">
                            <input type="number" id="tHour" name="hour" min="0" max="27" style="width:40px;padding:0 0 0 10px" onkeyup="validateNumberMM(this)" >時
                            <input type="number" id="tMinute" name="minute" min="0" max="59" style="width:40px;padding:0 0 0 10px" onkeyup="validateNumberMM(this)">分
                            <script>
                                function validateNumberMM(ele){
                                    if(ele.value == ""){
                                        return;
                                    }
                                    const inVal = parseInt(ele.value);
                                    if(inVal < ele.min){
                                        ele.value = ele.min;
                                    }
                                    if(ele.max < inVal){
                                        ele.value = ele.max;
                                    }
                                }
                            </script>
                            <input type="button" value="時刻設定" onclick="forceUpdateTime()"><br/>
                            <input type="button" value="強制設定を解除" style="margin-top:30px" onclick="removeForced()"><br/>
                            <input type="button" value="表示自動更新を停止" style="margin-top:10px" onclick="stopAutoUpdate()">
                        </fieldset>
                    </form>
                    <form id="diaSelector">
                        <fieldset style="width: 100%;padding: 10px;margin:0">
                            <label><input type="radio" name="year" value="202303" />2023年3月ダイヤ</label><br>
                            <label><input type="radio" name="year" value="202403" checked/>2024年3月ダイヤ</label>
                        </fieldset>
                        <fieldset style="width: 100%;padding: 10px;margin:0">
                            <label><input type="radio" name="diaType" value="weekday" checked/>平日</label>
                            <label><input type="radio" name="diaType" value="weekend" disabled/>土日祝</label><br>
                            <label><input type="radio" name="diaType" value="dayNigher" disabled/>平日ナイター</label><br>
                            <label><input type="radio" name="diaType" value="endDay" disabled/>休日デイゲーム</label>
                            <label><input type="radio" name="diaType" value="endNigher" disabled/>休日ナイター</label>
                        </fieldset>
                    </form>
                </div>
            </div>
        </div>
        <hr />
        <!--入力部-->
        <div id="inputFormDiv"></div>

        <script>
            main();
        </script>
    </section>
    <h1>西武池袋線 秋津駅 発車標シミュレーター</h1>
<section>
    <h2>このシミュレーターについて</h2>
    <p>西武池袋線秋津駅のホームに設置されている発車標のシミュレーターです。</p>
    <p>本シミュレータはyoshi様(Twitter<a href="https://twitter.com/rk113">@rk113</a>)に許可をいただき、<a
        href="https://r113.sakura.ne.jp/p/hasshahyo/seibu-ikebukuro/index.html">西武
        日本信号24ドット(所沢を除く池袋線各駅、下山口、西武球場前ほか)</a>をベースに改造したものです。<br/>
        <a href="https://github.com/yui-Kitamura/SeibuAkitsuSignBoard">GitHub[yui-Kitamura/SeibuAkitsuSignBoard]</a>で公開しています
    </p>
    <p>毎分15秒列車到着(通過)、45秒発車として描画を更新しています。電光掲示板は10秒ごと、アナログ時計は30秒ごとに描画更新しています</p>
    <p>本シミュレーターはJavaScript・CSS等が正常に動作するブラウザでご覧いただけます。JavaScriptが動作しない環境では動きません。
        <noscript style="color:red">JavaScriptが無効になっています。設定を変更してください</noscript></p>
    <p class="d16sqf" style="font-weight: bold">ドット打ちされていない文字素材は、株式会社ネットユーコム製「<a href="https://designpocket.jp/font/detail/23197">電光掲示板みたいなフォントAFSゴシック16■R</a>」を使用しています</p>
    <p>
        画像素材は1dot=1pxのドット打ちをした後に、<a href="https://yui-kitamura.github.io/EditDottedPicture/">EditDottedPicture</a>ツールを用いて、
        1px=8px(1px縁取り+内側塗り潰し)に変換した画像を表示に利用しています。（変換ツールのGitHub：<a
         href="https://github.com/yui-Kitamura/EditDottedPicture">[yui-Kitamura/EditDottedPicture]</a>）
    </p>
    <figure>
        <figcaption>使用している画像素材</figcaption>
        <img src="./resource/img/main.png" alt="表示画像の素材集" style="border:1px solid gray; padding: 3px;">
        <img src="./resource/img/telop.png" alt="テロップ系素材集" style="border:1px solid gray; padding: 3px;">
        <img src="./resource/font/char.png" alt="文字素材集" style="border:1px solid gray; padding: 3px;">
    </figure>
    <fieldset><legend>文字素材表示</legend>
        <script>
            initCharFont();
            function showCvtTxt(){
                const inTxt = document.getElementById('originText').value;
                document.getElementById('convertTextDisplay').innerHTML = getHtmlFromText(inTxt);
            }
        </script>
        <input type="text" id="originText"><input type="button" value="表示" onClick="showCvtTxt()">
        <div id="convertTextDisplay" style="height:72px"></div>
    </fieldset>
</section>
    <script>
        window.addEventListener('focusin', function () {
            updateClock(true);
        });
    </script>
</main>
<footer>
    <h2>変更履歴</h2>
    <table>
        <thead>
            <tr><th scope="col">日付</th><th scope="col">更新内容</th></tr>
        </thead>
        <tbody>
            <tr><td><time datetime="2023-12-19">2023/12/19</time></td><td>改造公開を許可いただく</td></tr>
            <tr><td><time datetime="2024-03-11">2024/03/11</time></td><td>v1.0.0 公開</td></tr>
            <tr><td><time datetime="2024-03-16">2024/03/16</time></td><td>ダイヤ改正実施日。データ未対応</td></tr>
            <tr><td><time datetime="2024-08-12">2024/08/12</time></td><td>24年3月ダイヤ(平日)データ対応</td></tr>
            <tr><td><time datetime="2024-08-15">2024/08/15</time></td><td>テロップにフォント「AFSゴシック16■R」を採用</td></tr>
        </tbody>
    </table>

</footer>
</body>
</html>
